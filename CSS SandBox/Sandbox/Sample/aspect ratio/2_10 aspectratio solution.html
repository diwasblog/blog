<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>CSS Intrinsic Ratios</title>
  <style>
    body {
      max-width: 800px;
      margin: auto;
      padding: 100px;
    }

    .ratio {
      position: relative;
      display: block;
    }
    .ratio:before {
      content: '';
      display: block;
      width: 100%;
      padding-bottom: 56.25%;
      background: red;
    }
    .ratio__content {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
    }
  </style>
</head>
<body>
  <h2>Loading red color div (of same aspect ratio of image ie (450/800=56.25)) if no image is loading so that paragraph content willnot shift up</h2> <br><br><br><br><br><br><br><br><br>
  <h2>Loading red color div (of same aspect ratio of image ie (450/800=56.25)) if no image is loading so that paragraph content willnot shift up</h2> <br><br><br><br><br><br><br><br><br>
  <h2>Loading red color div (of same aspect ratio of image ie (450/800=56.25)) if no image is loading so that paragraph content willnot shift up</h2> <br><br><br><br><br><br><br><br><br>
  <h2>Loading red color div (of same aspect ratio of image ie (450/800=56.25)) if no image is loading so that paragraph content willnot shift up</h2> <br><br><br><br><br><br><br><br><br>
  <h2>Loading red color div (of same aspect ratio of image ie (450/800=56.25)) if no image is loading so that paragraph content willnot shift up</h2> <br><br><br><br><br><br><br><br><br>
  <h2>Loading red color div (of same aspect ratio of image ie (450/800=56.25)) if no image is loading so that paragraph content willnot shift up</h2> <br><br><br><br><br><br><br><br><br>
  <h2>Loading red color div (of same aspect ratio of image ie (450/800=56.25)) if no image is loading so that paragraph content willnot shift up</h2> <br><br><br><br><br><br><br><br><br>
  <h2>Loading red color div (of same aspect ratio of image ie (450/800=56.25)) if no image is loading so that paragraph content willnot shift up</h2> <br><br><br><br><br><br><br><br><br>
  <h2>Loading red color div (of same aspect ratio of image ie (450/800=56.25)) if no image is loading so that paragraph content willnot shift up</h2> <br><br><br><br><br><br><br><br><br>
  <h2>Loading red color div (of same aspect ratio of image ie (450/800=56.25)) if no image is loading so that paragraph content willnot shift up</h2> <br><br><br><br><br><br><br><br><br>
  <h2>Loading red color div (of same aspect ratio of image ie (450/800=56.25)) if no image is loading so that paragraph content willnot shift up</h2> <br><br><br><br><br><br><br><br><br>
  <h2>Loading red color div (of same aspect ratio of image ie (450/800=56.25)) if no image is loading so that paragraph content willnot shift up</h2> <br><br><br><br><br><br><br><br><br>
  <h2>Loading red color div (of same aspect ratio of image ie (450/800=56.25)) if no image is loading so that paragraph content willnot shift up</h2> <br><br><br><br><br><br><br><br><br>
  <h2>Loading red color div (of same aspect ratio of image ie (450/800=56.25)) if no image is loading so that paragraph content willnot shift up</h2> <br><br><br><br><br><br><br><br><br>
  <div class="ratio">
    
    <img class="ratio__content js-lazy-image" data-src="http://placehold.it/800x450" alt="">
  </div>
  <p>Lorem ipsum dolor, sit amet consectetur adipisicing elit. Odio et officiis asperiores doloribus animi eligendi quibusdam quidem alias repellat. Minus ad, eligendi eos architecto reprehenderit consequuntur tenetur tempore suscipit inventore?</p>

<script>
  !(function (e, n, t) {
    "use strict";
    var o = "https://fonts.googleapis.com/css?family=Roboto&display=swaps",
        r = "__3perf_googleFonts_22961";
    function c(e) {
        (n.head || n.body).appendChild(e);
    }
    function a() {
        var e = n.createElement("link");
        (e.href = o), (e.rel = "stylesheet"), c(e);
    }
    function f(e) {
        if (!n.getElementById(r)) {
            var t = n.createElement("style");
            (t.id = r), c(t);
        }
        n.getElementById(r).innerHTML = e;
    }
    e.FontFace && e.FontFace.prototype.hasOwnProperty("display")
        ? (t[r] && f(t[r]),
            fetch(o)
                .then(function (e) {
                    return e.text();
                })
                .then(function (e) {
                    return e.replace(/@font-face {/g, "@font-face{font-display:swap;");
                })
                .then(function (e) {
                    return (t[r] = e);
                })
                .then(f)
                .catch(a))
        : a();
})(window, document, localStorage);


const images = document.querySelectorAll(".js-lazy-image");
const config = {
    // if the image gets within 200px in the Y axis, start the download.
    rootMargin: "200px 0px",
    threshold: 0.25
};

if (!("IntersectionObserver" in window)) {
    // no support for intersection observer, load the images immediately
    Array.from(images).forEach(image => loadImage(image));
} else {
    // observer for the images on the page
    var observer = new IntersectionObserver(onIntersection, config);
    images.forEach(image => {
        observer.observe(image);
    });
}

function onIntersection(entries) {
    // loop through the entries
    entries.forEach(entry => {
        // are we in viewport?
        if (entry.intersectionRatio > 0) {
            // stop watching
            observer.unobserve(entry.target);

            // load image
            loadImage(entry.target);
        }
    });
}

function loadImage(e) {
    e.src = e.dataset.src;
    e.classList.add("fade-in");
}

</script>

</body>
</html>