<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Dracula â€” A dark theme for Prism.js and 50+ apps</title>
    <link rel="stylesheet" href="../ASP Sandbox/css/bootstrap.css">
    <link rel="stylesheet" href="../ASP Sandbox/css/bootstrap-grid.css">
    <link rel="stylesheet" href="../ASP Sandbox/css/bootstrap-reboot.css">
    <link rel="stylesheet" href="../ASP Sandbox/css/dracula.css">
    <link rel="stylesheet" href="../ASP Sandbox/css/dracula-prism.css">
    <link rel="icon" type="image/x-icon" href="https://draculatheme.com/assets/img/favicon.ico">
</head>

<body>



    <h2> I have one Student table and I want total number of Students based different grades. Difficult with case
        and
        COUNT and groupby</h2>
    <div class="row">
        <div class="col-lg-6">
            <h2>Table</h2>
            <table style="border-collapse: collapse; width: 22.6064%;" border="1">
                <tbody>
                    <tr style="background: black; color: white;">
                        <td style="width: 8.53277%;"><strong>Id</strong></td>
                        <td style="width: 5.67369%;"><strong>Name</strong></td>
                        <td style="width: 8.39978%;"><strong>Mark</strong></td>
                    </tr>
                    <tr>
                        <td style="width: 8.53277%;">1</td>
                        <td style="width: 5.67369%;">Avesh</td>
                        <td style="width: 8.39978%;">88</td>
                    </tr>
                    <tr>
                        <td style="width: 8.53277%;">2</td>
                        <td style="width: 5.67369%;">Jenny</td>
                        <td style="width: 8.39978%;">75</td>
                    </tr>
                    <tr>
                        <td style="width: 8.53277%;">3</td>
                        <td style="width: 5.67369%;">Tushar</td>
                        <td style="width: 8.39978%;">85</td>
                    </tr>
                    <tr>
                        <td style="width: 8.53277%;">4</td>
                        <td style="width: 5.67369%;">Kavita</td>
                        <td style="width: 8.39978%;">75</td>
                    </tr>
                    <tr>
                        <td style="width: 8.53277%;">5</td>
                        <td style="width: 5.67369%;">Manas</td>
                        <td style="width: 8.39978%;">42</td>
                    </tr>
                    <tr>
                        <td style="width: 8.53277%;">6</td>
                        <td style="width: 5.67369%;">Martin</td>
                        <td style="width: 8.39978%;">69</td>
                    </tr>
                    <tr>
                        <td style="width: 8.53277%;">7</td>
                        <td style="width: 5.67369%;">Roy</td>
                        <td style="width: 8.39978%;">95</td>
                    </tr>
                    <tr>
                        <td style="width: 8.53277%;">8</td>
                        <td style="width: 5.67369%;">Benny</td>
                        <td style="width: 8.39978%;">92</td>
                    </tr>
                    <tr>
                        <td style="width: 8.53277%;">9</td>
                        <td style="width: 5.67369%;">Neevan</td>
                        <td style="width: 8.39978%;">82</td>
                    </tr>
                    <tr>
                        <td style="width: 8.53277%;">10</td>
                        <td style="width: 5.67369%;">Lee</td>
                        <td style="width: 8.39978%;">43</td>
                    </tr>
                    <tr>
                        <td style="width: 8.53277%;">11</td>
                        <td style="width: 5.67369%;">Loother</td>
                        <td style="width: 8.39978%;">65</td>
                    </tr>
                    <tr>
                        <td style="width: 8.53277%;">12</td>
                        <td style="width: 5.67369%;">Eric</td>
                        <td style="width: 8.39978%;">58</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="col-lg-6">
            <pre>
     <code class="language-sql">
            SELECT 
            COUNT(1) AS TotalStudents 
            ,COUNT(1) FILTER (WHERE Marks BETWEEN 40 AND 60) AS TotalGrade_C
            ,COUNT(1) FILTER (WHERE Marks BETWEEN 60 AND 80) AS TotalGrade_B
            ,COUNT(1) FILTER (WHERE Marks BETWEEN 80 AND 100) AS TotalGrade_A	
        FROM tbl_Students;
     </code>
 </pre>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-6">

        </div>
        <div class="col-lg-6">
            <h2>Result</h2>
            <table style="border-collapse: collapse; width: 23.5022%;" border="1">
                <tbody>
                    <tr style="background: black; color: white;">
                        <td style="width: 8.53277%;"><strong>TotalStudents </strong></td>
                        <td style="width: 5.67369%;"><strong>TotalGrade_C </strong></td>
                        <td style="width: 4.19989%;"><strong>TotalGrade_B </strong></td>
                        <td style="width: 4.19989%;"><strong>TotalGrade_A </strong></td>
                    </tr>
                    <tr>
                        <td style="width: 8.53277%;">12</td>
                        <td style="width: 5.67369%;">4</td>
                        <td style="width: 4.19989%;">3</td>
                        <td style="width: 4.19989%;">5</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <hr>


    <div class="row">
        <div class="col-lg-6">
            <pre>
                <code class="language-sql">
                    select
                    count(1), -- Count all users
                    count(1) filter (where gender = 'male'), -- Count male users
                    count(1) filter (where beta is true) -- Count beta users
                    count(1) filter (where active is true and beta is false) -- Count active non-beta users
                    from members
                </code>
            </pre>
        </div>
    </div>


    <h2>Using Case SUM</h2>
    <div class="row">
        <div class="col-lg-6">
            <pre>
                <code class="language-sql">
                    SELECT 
                    SUM(case when p.total_points BETWEEN 0 AND 20 then 1 else 0 end),0) as ultrapoor,
                    SUM(case when p.total_points BETWEEN 21 AND 40 then 1 else 0 end),0) as poor,
                    SUM(case when p.total_points BETWEEN 41 AND 60 then 1 else 0 end),0) as activepoor
                     from member_cte p
                </code>
            </pre>
        </div>
    </div>

    <h2>Using Case COUNT</h2>
    <div class="row">
        <div class="col-lg-6">
            <pre>
                <code class="language-sql">
                    SELECT 
                    COUNT(case when p.total_points BETWEEN 0 AND 20 then p.total_points else 0 end),0) as ultrapoor,
                    COUNT(case when p.total_points BETWEEN 21 AND 40 then p.total_points else 0 end),0) as poor,
                    COUNT(case when p.total_points BETWEEN 41 AND 60 then p.total_points else 0 end),0) as activepoor
                     from member_cte p
                </code>
            </pre>
        </div>
    </div>
    <script src="../ASP Sandbox/js/prism.js"></script>
    <script type="text/javascript">
        Prism.plugins.NormalizeWhitespace.setDefaults(
            {
                'remove-trailing': true,
                'remove-indent': true,
                'left-trim': true,
                'right-trim': true,
                // 'break-lines': 10,
                // 'indent': 2,
                // 'remove-initial-line-feed': false,
                // 'tabs-to-spaces': 4,
                // 'spaces-to-tabs': 4
            });
    </script>
</body>

</html>