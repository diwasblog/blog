<!DOCTYPE html>
<html>

<head>
</head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Dracula â€” A dark theme for Prism.js and 50+ apps</title>
<link rel="stylesheet" href="../css/bootstrap.css">
<link rel="stylesheet" href="../css/bootstrap-grid.css">
<link rel="stylesheet" href="../css/bootstrap-reboot.css">
<link rel="stylesheet" href="../css/dracula.css">
<link rel="stylesheet" href="../css/dracula-prism.css">
<link rel="icon" type="image/x-icon" href="https://draculatheme.com/assets/img/favicon.ico">

<body>

  ====================================================================================================
  <h2>One to One Relationship Configuration</h2>
  <pre>
    <code class="language-csharp">
      public class Student
{
    public int Id { get; set; }
    public string Name { get; set; }

    public int CurrentGradeId { get; set; }
    public Grade Grade { get; set; }
}

public class Grade
{
    public int GradeId { get; set; }
    public string GradeName { get; set; }
    public string Section { get; set; }

    public ICollection&lt;Student> Students { get; set; }
}
    </code>
  </pre>


  <pre>
    <code class="language-csharp">
      public class SchoolContext : DbContext
{
    protected override void OnConfiguring(DbContextOptionsBuilder optionsBuilder)
    {
        optionsBuilder.UseSqlServer("Server=.\\SQLEXPRESS;Database=EFCore-SchoolDB;Trusted_Connection=True");
    }

    protected override void OnModelCreating(ModelBuilder modelBuilder)
    {
        modelBuilder.Entity&lt;Student>()
            .HasOne&lt;Grade>(s => s.Grade)
            .WithMany(g => g.Students)
            .HasForeignKey(s => s.CurrentGradeId);
    }

    public DbSet&lt;Grade> Grades { get; set; }
    public DbSet&lt;Student> Students { get; set; }
}
    </code>
  </pre>
  =================================================================================================================================
  <h2>One to Many Relationship Configuration</h2>

  <img src="img/onetomany.PNG">
  <pre>
    <code class="language-csharp">
      public class Student
      {
          public int Id { get; set; }
          public string Name { get; set; }
             
          public StudentAddress Address { get; set; }
      }
      
      public class StudentAddress
      {
          public int StudentAddressId { get; set; }
          public string Address { get; set; }
          public string City { get; set; }
          public string State { get; set; }
          public string Country { get; set; }
      
          public int AddressOfStudentId { get; set; }
          public Student Student { get; set; }
      }
    </code>
  </pre>


  <pre>
    <code class="language-csharp">
      public class SchoolContext : DbContext
      {
          protected override void OnConfiguring(DbContextOptionsBuilder optionsBuilder)
          {
              optionsBuilder.UseSqlServer("Server=.\\SQLEXPRESS;Database=EFCore-SchoolDB;Trusted_Connection=True");
          }
      
          protected override void OnModelCreating(ModelBuilder modelBuilder)
          {
              modelBuilder.Entity&lt;Student>()
                  .HasOne&lt;StudentAddress>(s => s.Address)
                  .WithOne(ad => ad.Student)
                  .HasForeignKey&lt;StudentAddress>(ad => ad.AddressOfStudentId);
          }
      
          public DbSet&lt;Student> Students { get; set; }
          public DbSet&lt;StudentAddress> StudentAddresses { get; set; }
      }
    </code>
  </pre>
  =================================================================================================================================
  <img src="img/manytomany.PNG">
  <h2>Many to Many Relationship Configuration</h2>
  <pre>
    <code class="language-csharp">
      public class Student
      {
          public int StudentId { get; set; }
          public string Name { get; set; }
      }
      
      public class Course
      {
          public int CourseId { get; set; }
          public string CourseName { get; set; }
          public string Description { get; set; }
      }

      public class StudentCourse
      {
          public int StudentId { get; set; }
          public Student Student { get; set; }

          public int CourseId { get; set; }
          public Course Course { get; set; }
      }
    </code>
  </pre>
  Then Configure One to Many Relationship
  <br>
  <pre>
  <code class="language-csharp">
    public class Student
{
    public int StudentId { get; set; }
    public string Name { get; set; }

    public IList&lt;StudentCourse> StudentCourses { get; set; }
}

public class Course
{
    public int CourseId { get; set; }
    public string CourseName { get; set; }
    public string Description { get; set; }

    public IList&lt;StudentCourse> StudentCourses { get; set; }
}
  </code>
</pre>

  <pre>
    <code class="language-csharp">
      public class SchoolContext : DbContext
      {
          protected override void OnConfiguring(DbContextOptionsBuilder optionsBuilder)
          {
              optionsBuilder.UseSqlServer("Server=.\\SQLEXPRESS;Database=EFCore-SchoolDB;Trusted_Connection=True");
          }
      
          protected override void OnModelCreating(ModelBuilder modelBuilder)
          {
              modelBuilder.Entity&lt;StudentCourse>().HasKey(sc => new { sc.StudentId, sc.CourseId });

                  modelBuilder.Entity<StudentCourse>().HasKey(sc => new { sc.SId, sc.CId });

                  modelBuilder.Entity<StudentCourse>()
                      .HasOne<Student>(sc => sc.Student)
                      .WithMany(s => s.StudentCourses)
                      .HasForeignKey(sc => sc.SId);
                  
                  
                  modelBuilder.Entity<StudentCourse>()
                      .HasOne<Course>(sc => sc.Course)
                      .WithMany(s => s.StudentCourses)
                      .HasForeignKey(sc => sc.CId);  
          }
          
          public DbSet<Student> Students { get; set; }
          public DbSet<Course> Courses { get; set; }
          public DbSet<StudentCourse> StudentCourses { get; set; }
      }
    </code>
  </pre>
  <script src="../js/prism.js"></script>
  <script type="text/javascript">
    Prism.plugins.NormalizeWhitespace.setDefaults(
      {
        'remove-trailing': true,
        'remove-indent': true,
        'left-trim': true,
        'right-trim': true,
        // 'break-lines': 10,
        // 'indent': 2,
        // 'remove-initial-line-feed': false,
        // 'tabs-to-spaces': 4,
        // 'spaces-to-tabs': 4
      });
  </script>
</body>

</html>